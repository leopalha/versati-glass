
> versati-glass@1.0.0 dev
> next dev

  â–² Next.js 14.2.33
  - Local:        http://localhost:3000
  - Environments: .env.local, .env

 âœ“ Starting...
 âœ“ Ready in 4s
 â—‹ Compiling /src/middleware ...
 âœ“ Compiled /src/middleware in 606ms (145 modules)
 â—‹ Compiling / ...
 âœ“ Compiled / in 11.1s (1013 modules)
 â—‹ Compiling /_not-found ...
 GET / 200 in 19739ms
 âœ“ Compiled /_not-found in 21s (1002 modules)
 GET /images/box-premium.jpg 404 in 12906ms
 â¨¯ The requested resource isn't a valid image for /images/box-premium.jpg received null
 GET /images/guarda-corpo.jpg 404 in 12702ms
 â¨¯ The requested resource isn't a valid image for /images/guarda-corpo.jpg received null
 GET /images/espelho.jpg 404 in 11546ms
 â¨¯ The requested resource isn't a valid image for /images/espelho.jpg received null
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 20245ms
 GET /images/cta-pattern.svg 404 in 13272ms
 GET /images/hero-pattern.svg 404 in 19244ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 GET / 200 in 20380ms
 âœ“ Compiled /api/auth/[...nextauth] in 2.2s (574 modules)
 âœ“ Compiled (748 modules)
 GET /images/fachada.jpg 404 in 11714ms
 â¨¯ The requested resource isn't a valid image for /images/fachada.jpg received null
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 11793ms
 GET /icon.png?4a0e2032a7eb3a55 200 in 12923ms
 GET /manifest.webmanifest 200 in 13844ms
 GET /images/box-premium.jpg 404 in 7832ms
 â¨¯ The requested resource isn't a valid image for /images/box-premium.jpg received null
 GET /images/guarda-corpo.jpg 404 in 6219ms
 â¨¯ The requested resource isn't a valid image for /images/guarda-corpo.jpg received null
 GET /images/cta-pattern.svg 404 in 8604ms
 GET /images/hero-pattern.svg 404 in 11630ms
 GET /images/espelho.jpg 404 in 861ms
 â¨¯ The requested resource isn't a valid image for /images/espelho.jpg received null
 GET /images/fachada.jpg 404 in 684ms
 â¨¯ The requested resource isn't a valid image for /images/fachada.jpg received null
 GET /icon.png?4a0e2032a7eb3a55 200 in 989ms
 GET /icon-192x192.png 404 in 1244ms
 GET /images/hero-pattern.svg 404 in 614ms
 GET /images/cta-pattern.svg 404 in 666ms
 GET /icons/icon-144x144.png 404 in 794ms
 GET /icon.png?4a0e2032a7eb3a55 200 in 1180ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /manifest.webmanifest 200 in 1319ms
[DEBUG] 2025-12-19T03:39:37.488Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:39:37.500Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:39:37.501Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
[DEBUG] 2025-12-19T03:39:37.504Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:39:37.505Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:39:37.505Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 18710ms
 GET /api/auth/session 200 in 7192ms
[DEBUG] 2025-12-19T03:39:37.777Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:39:37.778Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:39:37.780Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 913ms
[DEBUG] 2025-12-19T03:39:38.308Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:39:38.310Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:39:38.311Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /icon-192x192.png 404 in 728ms
 GET /api/auth/session 200 in 561ms
[DEBUG] 2025-12-19T03:39:38.388Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:39:38.389Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:39:38.389Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 315ms
[DEBUG] 2025-12-19T03:39:38.605Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:39:38.605Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:39:38.606Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 247ms
[DEBUG] 2025-12-19T03:39:38.681Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:39:38.683Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:39:38.685Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 259ms
[DEBUG] 2025-12-19T03:39:39.322Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:39:39.323Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:39:39.323Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 239ms
 âœ“ Compiled in 8.4s (1014 modules)
 â—‹ Compiling /_not-found ...
 âœ“ Compiled /_not-found in 736ms (539 modules)
 GET /images/hero-pattern.svg 404 in 2650ms
 GET /images/cta-pattern.svg 404 in 2381ms
 GET /images/cta-pattern.svg 404 in 2619ms
 GET /images/hero-pattern.svg 404 in 2627ms
 GET /icons/icon-144x144.png 404 in 188ms
 âœ“ Compiled in 4.4s (1016 modules)
 GET /images/cta-pattern.svg 404 in 729ms
 GET /images/hero-pattern.svg 404 in 873ms
 GET /images/cta-pattern.svg 404 in 722ms
 GET /images/hero-pattern.svg 404 in 730ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 2.8s (712 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /api/auth/csrf 200 in 3803ms
 POST /api/auth/signout 200 in 267ms
 â—‹ Compiling /_not-found ...
 GET / 200 in 4369ms
 âœ“ Compiled /_not-found in 3.2s (714 modules)
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 5443ms
 GET /images/cta-pattern.svg 404 in 2048ms
 GET /images/hero-pattern.svg 404 in 4817ms
 â—‹ Compiling /manifest.webmanifest ...
 âœ“ Compiled /manifest.webmanifest in 5.1s (746 modules)
 GET /manifest.webmanifest 200 in 7851ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /api/auth/session 200 in 7630ms
 GET /api/auth/session 200 in 566ms
 GET /api/auth/session 200 in 724ms
 GET /api/auth/session 200 in 674ms
 â—‹ Compiling /login ...
 âœ“ Compiled /login in 7.9s (1272 modules)
 GET /images/hero-pattern.svg 404 in 917ms
 GET /images/cta-pattern.svg 404 in 806ms
 GET /images/hero-pattern.svg 404 in 389ms
 GET /images/cta-pattern.svg 404 in 403ms
 GET /icons/icon-144x144.png 404 in 145ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /api/auth/providers 200 in 228ms
 GET /api/auth/csrf 200 in 65ms
[DEBUG] 2025-12-19T03:43:55.871Z - [AUTH] Starting authorization { email: 'cliente@versatiglass.com.br' }
[DEBUG] 2025-12-19T03:43:55.874Z - [AUTH] Credentials validated { email: 'cliente@versatiglass.com.br' }
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."password", "public"."users"."name", "public"."users"."phone", "public"."users"."cpfCnpj", "public"."users"."street", "public"."users"."number", "public"."users"."complement", "public"."users"."neighborhood", "public"."users"."city", "public"."users"."state", "public"."users"."zipCode", "public"."users"."role"::text, "public"."users"."emailVerified", "public"."users"."phoneVerified", "public"."users"."authProvider"::text, "public"."users"."googleId", "public"."users"."createdAt", "public"."users"."updatedAt", "public"."users"."lastLoginAt" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T03:43:56.025Z - [AUTH] User found { email: 'cliente@versatiglass.com.br', hasPassword: true }
[DEBUG] 2025-12-19T03:43:56.296Z - [AUTH] Password comparison result { isValid: true }
[DEBUG] 2025-12-19T03:43:56.296Z - [AUTH] Authentication successful {
  userId: 'fae47148-3f7b-426f-985d-488ba2a850fb',
  email: 'cliente@versatiglass.com.br'
}
[DEBUG] 2025-12-19T03:43:56.297Z - [AUTH] SignIn callback {
  provider: 'credentials',
  userId: 'fae47148-3f7b-426f-985d-488ba2a850fb',
  email: 'cliente@versatiglass.com.br'
}
[DEBUG] 2025-12-19T03:43:56.297Z - [AUTH] JWT callback { hasUser: true, trigger: 'signIn' }
[DEBUG] 2025-12-19T03:43:56.297Z - [AUTH] JWT - User added to token { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 POST /api/auth/callback/credentials? 200 in 500ms
[DEBUG] 2025-12-19T03:43:56.390Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:43:56.390Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:43:56.390Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 74ms
[DEBUG] 2025-12-19T03:43:56.490Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:43:56.490Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:43:56.491Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 84ms
[DEBUG] 2025-12-19T03:43:56.598Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:43:56.599Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:43:56.599Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 86ms
 â—‹ Compiling /portal ...
 âœ“ Compiled /portal in 4.2s (1300 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:44:02.164Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:02.165Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:02.165Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
[DEBUG] 2025-12-19T03:44:02.166Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:02.166Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:02.166Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND "public"."appointments"."scheduledDate" >= $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) ORDER BY "public"."appointments"."scheduledDate" ASC LIMIT $5 OFFSET $6
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."userId" = $1 AND "public"."orders"."status" NOT IN (CAST($2::text AS "public"."OrderStatus"),CAST($3::text AS "public"."OrderStatus"))) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE ("public"."quotes"."userId" = $1 AND "public"."quotes"."status" IN (CAST($2::text AS "public"."QuoteStatus"),CAST($3::text AS "public"."QuoteStatus"))) OFFSET $4) AS "sub"
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 515ms
 GET /portal 200 in 5998ms
 GET /icons/icon-144x144.png 404 in 264ms
[DEBUG] 2025-12-19T03:44:04.847Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:04.847Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:04.848Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 142ms
[DEBUG] 2025-12-19T03:44:04.939Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:04.939Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:04.939Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 72ms
[DEBUG] 2025-12-19T03:44:05.016Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:05.016Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:05.016Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 65ms
[DEBUG] 2025-12-19T03:44:05.086Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:05.087Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:05.087Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 60ms
 â—‹ Compiling /portal/pedidos ...
 âœ“ Compiled /portal/pedidos in 1018ms (1305 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:44:20.050Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:20.051Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:20.051Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT 1
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 ORDER BY "public"."orders"."createdAt" DESC OFFSET $2
 GET /portal/pedidos?_rsc=1vo4h 200 in 281ms
 GET /icons/icon-144x144.png 404 in 192ms
 â—‹ Compiling /portal/orcamentos ...
 âœ“ Compiled /portal/orcamentos in 757ms (1277 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:44:26.877Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:26.878Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:26.878Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC OFFSET $2
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2) OFFSET $3
 GET /icons/icon-144x144.png 404 in 308ms
 GET /portal/orcamentos?_rsc=fkd23 200 in 382ms
 â—‹ Compiling /portal/orcamentos/[id] ...
 âœ“ Compiled /portal/orcamentos/[id] in 1136ms (1295 modules)
 â—‹ Compiling /api/quotes/[id] ...
 âœ“ Compiled /api/quotes/[id] in 924ms (789 modules)
 GET /icons/icon-144x144.png 404 in 1783ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:44:36.878Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:36.879Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:36.879Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT 1
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE ("public"."quotes"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1) OFFSET $2
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."thumbnail", "public"."products"."category"::text FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."phone" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
 GET /api/quotes/0a595f6a-3b92-438f-8410-2d8b0bc4bae8 200 in 2841ms
[DEBUG] 2025-12-19T03:44:36.984Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:36.984Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:36.984Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE ("public"."quotes"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1) OFFSET $2
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."thumbnail", "public"."products"."category"::text FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."phone" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
 GET /api/quotes/0a595f6a-3b92-438f-8410-2d8b0bc4bae8 200 in 86ms
 â—‹ Compiling /portal/perfil ...
 âœ“ Compiled /portal/agendamentos in 1793ms (1313 modules)
 âœ“ Compiled in 602ms (516 modules)
 GET /icons/icon-144x144.png 404 in 2715ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /icons/icon-144x144.png 404 in 207ms
[DEBUG] 2025-12-19T03:44:46.526Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:46.526Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:46.526Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT 1
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND ("public"."appointments"."scheduledDate" < $2 OR "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"),CAST($5::text AS "public"."AppointmentStatus")))) ORDER BY "public"."appointments"."scheduledDate" DESC LIMIT $6 OFFSET $7
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND "public"."appointments"."scheduledDate" >= $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"),CAST($5::text AS "public"."AppointmentStatus"))) ORDER BY "public"."appointments"."scheduledDate" ASC OFFSET $6
 GET /portal/agendamentos?_rsc=cham2 200 in 228ms
 â—‹ Compiling /portal/documentos ...
 âœ“ Compiled /portal/documentos in 856ms (1325 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:44:50.487Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:44:50.487Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:44:50.488Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."orderId", "public"."documents"."quoteId", "public"."documents"."type"::text, "public"."documents"."name", "public"."documents"."url", "public"."documents"."mimeType", "public"."documents"."size", "public"."documents"."status"::text, "public"."documents"."signedAt", "public"."documents"."signedBy", "public"."documents"."signatureUrl", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."userId" = $1 ORDER BY "public"."documents"."createdAt" DESC OFFSET $2
 GET /icons/icon-144x144.png 404 in 195ms
 GET /portal/documentos?_rsc=1t5cm 200 in 261ms
 GET /icons/icon-144x144.png 404 in 109ms
[DEBUG] 2025-12-19T03:45:53.404Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:45:53.404Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:45:53.404Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND "public"."appointments"."scheduledDate" >= $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"),CAST($5::text AS "public"."AppointmentStatus"))) ORDER BY "public"."appointments"."scheduledDate" ASC OFFSET $6
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND ("public"."appointments"."scheduledDate" < $2 OR "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"),CAST($5::text AS "public"."AppointmentStatus")))) ORDER BY "public"."appointments"."scheduledDate" DESC LIMIT $6 OFFSET $7
 GET /icons/icon-144x144.png 404 in 157ms
 GET /portal/agendamentos?_rsc=cham2 200 in 212ms
 GET /icons/icon-144x144.png 404 in 86ms
[DEBUG] 2025-12-19T03:45:55.071Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:45:55.072Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:45:55.072Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC OFFSET $2
 GET /icons/icon-144x144.png 404 in 156ms
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2) OFFSET $3
 GET /portal/orcamentos?_rsc=fkd23 200 in 232ms
 GET /icons/icon-144x144.png 404 in 90ms
[DEBUG] 2025-12-19T03:45:57.924Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:45:57.924Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:45:57.924Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE ("public"."quotes"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1) OFFSET $2
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."thumbnail", "public"."products"."category"::text FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."phone" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
 GET /api/quotes/0a595f6a-3b92-438f-8410-2d8b0bc4bae8 200 in 192ms
 GET /icons/icon-144x144.png 404 in 198ms
[DEBUG] 2025-12-19T03:45:58.071Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:45:58.071Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:45:58.072Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE ("public"."quotes"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1) OFFSET $2
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."thumbnail", "public"."products"."category"::text FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."phone" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
 GET /api/quotes/0a595f6a-3b92-438f-8410-2d8b0bc4bae8 200 in 113ms
[DEBUG] 2025-12-19T03:46:26.988Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:46:26.989Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:46:26.989Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND "public"."appointments"."scheduledDate" >= $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"),CAST($5::text AS "public"."AppointmentStatus"))) ORDER BY "public"."appointments"."scheduledDate" ASC OFFSET $6
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND ("public"."appointments"."scheduledDate" < $2 OR "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"),CAST($5::text AS "public"."AppointmentStatus")))) ORDER BY "public"."appointments"."scheduledDate" DESC LIMIT $6 OFFSET $7
 GET /portal/agendamentos?_rsc=cham2 200 in 244ms
 GET /icons/icon-144x144.png 404 in 189ms
 GET /icons/icon-144x144.png 404 in 83ms
[DEBUG] 2025-12-19T03:46:28.317Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:46:28.317Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:46:28.317Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND "public"."appointments"."scheduledDate" >= $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) ORDER BY "public"."appointments"."scheduledDate" ASC LIMIT $5 OFFSET $6
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."userId" = $1 AND "public"."orders"."status" NOT IN (CAST($2::text AS "public"."OrderStatus"),CAST($3::text AS "public"."OrderStatus"))) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE ("public"."quotes"."userId" = $1 AND "public"."quotes"."status" IN (CAST($2::text AS "public"."QuoteStatus"),CAST($3::text AS "public"."QuoteStatus"))) OFFSET $4) AS "sub"
 GET /portal?_rsc=17gzd 200 in 227ms
 GET /icons/icon-144x144.png 404 in 183ms
 GET /icons/icon-144x144.png 404 in 114ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 288ms
 GET / 200 in 817ms
 GET /images/hero-pattern.svg 404 in 240ms
 GET /images/cta-pattern.svg 404 in 373ms
 â—‹ Compiling /manifest.webmanifest ...
 âœ“ Compiled /api/auth/[...nextauth] in 6.2s (800 modules)
 âœ“ Compiled (802 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /manifest.webmanifest 200 in 9129ms
[DEBUG] 2025-12-19T03:48:00.221Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:48:00.222Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:48:00.223Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 6345ms
[DEBUG] 2025-12-19T03:48:00.801Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:48:00.802Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:48:00.802Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 518ms
[DEBUG] 2025-12-19T03:48:01.309Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:48:01.309Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:48:01.309Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 455ms
[DEBUG] 2025-12-19T03:48:01.707Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:48:01.708Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:48:01.708Z - [AUTH] Session created { userId: 'fae47148-3f7b-426f-985d-488ba2a850fb', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 364ms
 âœ“ Compiled in 7.9s (1332 modules)
 âœ“ Compiled in 6.2s (1332 modules)
 âœ“ Compiled in 1ms (802 modules)
 âœ“ Compiled in 5.1s (1332 modules)
 GET /images/cta-pattern.svg 404 in 11608ms
 GET /images/hero-pattern.svg 404 in 11625ms
 GET /images/cta-pattern.svg 404 in 11648ms
 GET /images/hero-pattern.svg 404 in 11680ms
 GET /icons/icon-144x144.png 404 in 12130ms
 âœ“ Compiled in 5.1s (1332 modules)
 âœ“ Compiled in 8.3s (1332 modules)
 âœ“ Compiled in 12.5s (1296 modules)
 âœ“ Compiled in 2ms (766 modules)
 âœ“ Compiled in 8.5s (1296 modules)
 GET /images/cta-pattern.svg 404 in 22479ms
 GET /images/hero-pattern.svg 404 in 22502ms
 GET /images/hero-pattern.svg 404 in 22488ms
 GET /images/cta-pattern.svg 404 in 22502ms
 âœ“ Compiled in 5ms (766 modules)
 GET /images/hero-pattern.svg 404 in 1383ms
 GET /images/cta-pattern.svg 404 in 1407ms
 GET /images/hero-pattern.svg 404 in 1430ms
 GET /images/cta-pattern.svg 404 in 1409ms
 âœ“ Compiled in 12.5s (1296 modules)
 âœ“ Compiled in 5.8s (1296 modules)
 âœ“ Compiled in 1ms (766 modules)
 âœ“ Compiled in 4.4s (1296 modules)
 GET /images/cta-pattern.svg 404 in 9773ms
 GET /images/hero-pattern.svg 404 in 9786ms
 GET /images/cta-pattern.svg 404 in 9818ms
 GET /images/hero-pattern.svg 404 in 9864ms
 âœ“ Compiled in 3.4s (1296 modules)
 âœ“ Compiled in 1ms (766 modules)
 GET /images/hero-pattern.svg 404 in 825ms
 GET /images/cta-pattern.svg 404 in 819ms
 GET /images/cta-pattern.svg 404 in 447ms
 GET /images/hero-pattern.svg 404 in 470ms
 âœ“ Compiled in 7.5s (1295 modules)
 â—‹ Compiling /_not-found ...
 âœ“ Compiled /_not-found in 1112ms (766 modules)
 GET /images/hero-pattern.svg 404 in 1950ms
 GET /images/cta-pattern.svg 404 in 2075ms
 GET /images/hero-pattern.svg 404 in 2102ms
 GET /images/cta-pattern.svg 404 in 1926ms
 âœ“ Compiled in 6.3s (1296 modules)
 GET /images/cta-pattern.svg 404 in 483ms
 GET /images/hero-pattern.svg 404 in 511ms
 GET /images/cta-pattern.svg 404 in 442ms
 GET /images/hero-pattern.svg 404 in 464ms
 âœ“ Compiled in 4.6s (1296 modules)
 GET /images/cta-pattern.svg 404 in 744ms
 GET /images/hero-pattern.svg 404 in 756ms
 GET /images/hero-pattern.svg 404 in 792ms
 GET /images/cta-pattern.svg 404 in 619ms
 âœ“ Compiled in 2.7s (530 modules)
 âœ“ Compiled in 1931ms (530 modules)
 GET /images/cta-pattern.svg 404 in 379ms
 GET /images/hero-pattern.svg 404 in 426ms
 GET /images/cta-pattern.svg 404 in 503ms
 GET /images/hero-pattern.svg 404 in 501ms
 âœ“ Compiled in 1391ms (530 modules)
 GET /images/hero-pattern.svg 404 in 491ms
 GET /images/cta-pattern.svg 404 in 537ms
 GET /images/hero-pattern.svg 404 in 553ms
 GET /images/cta-pattern.svg 404 in 509ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 3.1s (769 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /api/auth/csrf 200 in 3827ms
 POST /api/auth/signout 200 in 148ms
 â—‹ Compiling /_not-found ...
 GET / 200 in 2236ms
 âœ“ Compiled /_not-found in 1758ms (770 modules)
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 2902ms
 GET /images/hero-pattern.svg 404 in 2651ms
 GET /images/cta-pattern.svg 404 in 1092ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /api/auth/session 200 in 958ms
 â—‹ Compiling /manifest.webmanifest ...
 âœ“ Compiled /manifest.webmanifest in 3.3s (802 modules)
 âœ“ Compiled /login in 1ms (802 modules)
 âœ“ Compiled in 1ms (824 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /manifest.webmanifest 200 in 8881ms
 GET /api/auth/session 200 in 7591ms
 GET /api/auth/session 200 in 257ms
 GET /api/auth/session 200 in 249ms
 GET /icons/icon-144x144.png 404 in 480ms
 GET /api/auth/providers 200 in 112ms
 GET /api/auth/csrf 200 in 84ms
[DEBUG] 2025-12-19T03:57:14.330Z - [AUTH] Starting authorization { email: 'admin@versatiglass.com.br' }
[DEBUG] 2025-12-19T03:57:14.333Z - [AUTH] Credentials validated { email: 'admin@versatiglass.com.br' }
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."password", "public"."users"."name", "public"."users"."phone", "public"."users"."cpfCnpj", "public"."users"."street", "public"."users"."number", "public"."users"."complement", "public"."users"."neighborhood", "public"."users"."city", "public"."users"."state", "public"."users"."zipCode", "public"."users"."role"::text, "public"."users"."emailVerified", "public"."users"."phoneVerified", "public"."users"."authProvider"::text, "public"."users"."googleId", "public"."users"."createdAt", "public"."users"."updatedAt", "public"."users"."lastLoginAt" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T03:57:14.474Z - [AUTH] User found { email: 'admin@versatiglass.com.br', hasPassword: true }
[DEBUG] 2025-12-19T03:57:15.385Z - [AUTH] Password comparison result { isValid: true }
[DEBUG] 2025-12-19T03:57:15.385Z - [AUTH] Authentication successful {
  userId: '81628a46-5e97-437a-9488-32d6a79e9d58',
  email: 'admin@versatiglass.com.br'
}
[DEBUG] 2025-12-19T03:57:15.386Z - [AUTH] SignIn callback {
  provider: 'credentials',
  userId: '81628a46-5e97-437a-9488-32d6a79e9d58',
  email: 'admin@versatiglass.com.br'
}
[DEBUG] 2025-12-19T03:57:15.386Z - [AUTH] JWT callback { hasUser: true, trigger: 'signIn' }
[DEBUG] 2025-12-19T03:57:15.386Z - [AUTH] JWT - User added to token { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 POST /api/auth/callback/credentials? 200 in 1161ms
[DEBUG] 2025-12-19T03:57:15.505Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:15.506Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:15.506Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 97ms
[DEBUG] 2025-12-19T03:57:15.616Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:15.616Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:15.616Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 96ms
[DEBUG] 2025-12-19T03:57:15.727Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:15.727Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:15.727Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 96ms
 â—‹ Compiling /admin ...
 âœ“ Compiled /admin in 5.3s (1397 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2 AND "public"."orders"."paymentStatus" = CAST($3::text AS "public"."PaymentStatus")) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."conversations"."id" FROM "public"."conversations" WHERE "public"."conversations"."status" = CAST($1::text AS "public"."ConversationStatus") OFFSET $2) AS "sub"
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE 1=1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) ORDER BY "public"."quotes"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."appointments"."id" FROM "public"."appointments" WHERE ("public"."appointments"."scheduledDate" >= $1 AND "public"."appointments"."scheduledDate" < $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" NOT IN (CAST($1::text AS "public"."OrderStatus"),CAST($2::text AS "public"."OrderStatus")) OFFSET $3) AS "sub"
[DEBUG] 2025-12-19T03:57:22.526Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:22.527Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:22.527Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."role" = CAST($1::text AS "public"."Role") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."createdAt" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."paymentStatus" = CAST($2::text AS "public"."PaymentStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) OFFSET $3) AS "sub"
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 367ms
 GET /admin 200 in 7181ms
 GET /images/hero-pattern.svg 404 in 322ms
 GET /images/cta-pattern.svg 404 in 305ms
 GET /icons/icon-144x144.png 404 in 400ms
 â—‹ Compiling /api/whatsapp/stream ...
 âœ“ Compiled /api/whatsapp/stream in 978ms (844 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:57:27.207Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:27.208Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:27.208Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 2005ms
[DEBUG] 2025-12-19T03:57:27.296Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:27.297Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:27.297Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
[DEBUG] 2025-12-19T03:57:27.407Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:27.407Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:27.408Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 160ms
[DEBUG] 2025-12-19T03:57:27.534Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:27.535Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:27.535Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 111ms
[DEBUG] 2025-12-19T03:57:27.699Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:27.699Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:27.699Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 150ms
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
 GET /api/whatsapp/stream 200 in 9307ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 233ms
 GET /images/hero-pattern.svg 404 in 194ms
 GET / 200 in 853ms
 GET /images/cta-pattern.svg 404 in 461ms
 GET /manifest.webmanifest 200 in 494ms
[DEBUG] 2025-12-19T03:57:38.546Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:38.546Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:38.547Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 394ms
[DEBUG] 2025-12-19T03:57:38.814Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:38.815Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:38.815Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 236ms
[DEBUG] 2025-12-19T03:57:39.011Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:39.011Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:39.011Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 158ms
[DEBUG] 2025-12-19T03:57:39.183Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:57:39.185Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:57:39.185Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 155ms
[DEBUG] 2025-12-19T03:58:22.525Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:58:22.526Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:58:22.527Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /portal?_rsc=19zvn 200 in 275ms
[DEBUG] 2025-12-19T03:58:23.124Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:58:23.125Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:58:23.125Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND "public"."appointments"."scheduledDate" >= $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) ORDER BY "public"."appointments"."scheduledDate" ASC LIMIT $5 OFFSET $6
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE ("public"."quotes"."userId" = $1 AND "public"."quotes"."status" IN (CAST($2::text AS "public"."QuoteStatus"),CAST($3::text AS "public"."QuoteStatus"))) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."userId" = $1 AND "public"."orders"."status" NOT IN (CAST($2::text AS "public"."OrderStatus"),CAST($3::text AS "public"."OrderStatus"))) OFFSET $4) AS "sub"
 GET /portal?_rsc=17gzd 200 in 441ms
 GET /icons/icon-144x144.png 404 in 301ms
 âœ“ Compiled in 4.5s (1347 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:59:09.886Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:59:09.886Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:59:09.886Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
[DEBUG] 2025-12-19T03:59:09.887Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:59:09.887Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:59:09.888Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."appointments"."id", "public"."appointments"."userId", "public"."appointments"."orderId", "public"."appointments"."quoteId", "public"."appointments"."type"::text, "public"."appointments"."scheduledDate", "public"."appointments"."scheduledTime", "public"."appointments"."estimatedDuration", "public"."appointments"."addressStreet", "public"."appointments"."addressNumber", "public"."appointments"."addressComplement", "public"."appointments"."addressNeighborhood", "public"."appointments"."addressCity", "public"."appointments"."addressState", "public"."appointments"."addressZipCode", "public"."appointments"."status"::text, "public"."appointments"."assignedToId", "public"."appointments"."notes", "public"."appointments"."completionNotes", "public"."appointments"."reminderSentAt", "public"."appointments"."createdAt", "public"."appointments"."updatedAt", "public"."appointments"."completedAt" FROM "public"."appointments" WHERE ("public"."appointments"."userId" = $1 AND "public"."appointments"."scheduledDate" >= $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) ORDER BY "public"."appointments"."scheduledDate" ASC LIMIT $5 OFFSET $6
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."userId" = $1 AND "public"."orders"."status" NOT IN (CAST($2::text AS "public"."OrderStatus"),CAST($3::text AS "public"."OrderStatus"))) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."userId" = $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE ("public"."quotes"."userId" = $1 AND "public"."quotes"."status" IN (CAST($2::text AS "public"."QuoteStatus"),CAST($3::text AS "public"."QuoteStatus"))) OFFSET $4) AS "sub"
 GET /portal?_rsc=1hazs 200 in 827ms
 GET /images/hero-pattern.svg 404 in 485ms
 GET /images/cta-pattern.svg 404 in 486ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 238ms
 GET / 200 in 709ms
 GET /images/hero-pattern.svg 404 in 431ms
 GET /images/cta-pattern.svg 404 in 528ms
 â—‹ Compiling /manifest.webmanifest ...
 âœ“ Compiled /api/auth/[...nextauth] in 2.4s (835 modules)
 âœ“ Compiled (837 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /manifest.webmanifest 200 in 6204ms
[DEBUG] 2025-12-19T03:59:22.835Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:59:22.836Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:59:22.836Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 6515ms
 âœ“ Compiled in 8.1s (1383 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:59:31.017Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:59:31.019Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:59:31.019Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 7697ms
[DEBUG] 2025-12-19T03:59:33.218Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:59:33.220Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:59:33.221Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 1816ms
[DEBUG] 2025-12-19T03:59:34.145Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:59:34.146Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:59:34.147Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 855ms
 GET /images/hero-pattern.svg 404 in 1411ms
 GET /images/cta-pattern.svg 404 in 1434ms
 GET /images/cta-pattern.svg 404 in 1410ms
 GET /images/hero-pattern.svg 404 in 1462ms
 GET /icons/icon-144x144.png 404 in 1566ms
 âœ“ Compiled in 12s (1381 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T03:59:59.307Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T03:59:59.308Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T03:59:59.308Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /admin?_rsc=19zvn 200 in 10254ms
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."createdAt" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT 1
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2 AND "public"."orders"."paymentStatus" = CAST($3::text AS "public"."PaymentStatus")) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."conversations"."id" FROM "public"."conversations" WHERE "public"."conversations"."status" = CAST($1::text AS "public"."ConversationStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) ORDER BY "public"."quotes"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE 1=1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."appointments"."id" FROM "public"."appointments" WHERE ("public"."appointments"."scheduledDate" >= $1 AND "public"."appointments"."scheduledDate" < $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" NOT IN (CAST($1::text AS "public"."OrderStatus"),CAST($2::text AS "public"."OrderStatus")) OFFSET $3) AS "sub"
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."paymentStatus" = CAST($2::text AS "public"."PaymentStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."role" = CAST($1::text AS "public"."Role") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
[DEBUG] 2025-12-19T04:00:01.010Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:00:01.013Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:00:01.014Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /admin?_rsc=jirn6 200 in 1444ms
 GET /images/cta-pattern.svg 404 in 1114ms
 GET /images/hero-pattern.svg 404 in 1138ms
 â—‹ Compiling /api/whatsapp/stream ...
 âœ“ Compiled /api/whatsapp/stream in 4.4s (1383 modules)
 GET /images/cta-pattern.svg 404 in 5036ms
 GET /images/hero-pattern.svg 404 in 5050ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:00:07.396Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:00:07.396Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:00:07.396Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /icons/icon-144x144.png 404 in 4884ms
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."createdAt" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."paymentStatus" = CAST($2::text AS "public"."PaymentStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."appointments"."id" FROM "public"."appointments" WHERE ("public"."appointments"."scheduledDate" >= $1 AND "public"."appointments"."scheduledDate" < $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" NOT IN (CAST($1::text AS "public"."OrderStatus"),CAST($2::text AS "public"."OrderStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE 1=1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2 AND "public"."orders"."paymentStatus" = CAST($3::text AS "public"."PaymentStatus")) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."role" = CAST($1::text AS "public"."Role") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."conversations"."id" FROM "public"."conversations" WHERE "public"."conversations"."status" = CAST($1::text AS "public"."ConversationStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) ORDER BY "public"."quotes"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
[DEBUG] 2025-12-19T04:00:07.818Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:00:07.819Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:00:07.819Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /admin?_rsc=jirn6 200 in 425ms
 GET /images/hero-pattern.svg 404 in 204ms
 GET /images/cta-pattern.svg 404 in 192ms
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
 âœ“ Compiled in 2s (1349 modules)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."createdAt" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" NOT IN (CAST($1::text AS "public"."OrderStatus"),CAST($2::text AS "public"."OrderStatus")) OFFSET $3) AS "sub"
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2 AND "public"."orders"."paymentStatus" = CAST($3::text AS "public"."PaymentStatus")) OFFSET $4) AS "sub"
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE 1=1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."conversations"."id" FROM "public"."conversations" WHERE "public"."conversations"."status" = CAST($1::text AS "public"."ConversationStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."role" = CAST($1::text AS "public"."Role") OFFSET $2) AS "sub"
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."paymentStatus" = CAST($2::text AS "public"."PaymentStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."appointments"."id" FROM "public"."appointments" WHERE ("public"."appointments"."scheduledDate" >= $1 AND "public"."appointments"."scheduledDate" < $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) ORDER BY "public"."quotes"."createdAt" DESC LIMIT $3 OFFSET $4
[DEBUG] 2025-12-19T04:00:46.703Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:00:46.704Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:00:46.704Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /admin?_rsc=jirn6 200 in 620ms
 GET /images/hero-pattern.svg 404 in 463ms
 GET /images/cta-pattern.svg 404 in 454ms
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
 âœ“ Compiled in 1759ms (1349 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."createdAt" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" NOT IN (CAST($1::text AS "public"."OrderStatus"),CAST($2::text AS "public"."OrderStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."orders"."id", "public"."orders"."number", "public"."orders"."quoteId", "public"."orders"."userId", "public"."orders"."serviceStreet", "public"."orders"."serviceNumber", "public"."orders"."serviceComplement", "public"."orders"."serviceNeighborhood", "public"."orders"."serviceCity", "public"."orders"."serviceState", "public"."orders"."serviceZipCode", "public"."orders"."subtotal", "public"."orders"."discount", "public"."orders"."installationFee", "public"."orders"."total", "public"."orders"."paymentStatus"::text, "public"."orders"."paymentMethod"::text, "public"."orders"."paidAmount", "public"."orders"."stripeSessionId", "public"."orders"."stripePaymentIntentId", "public"."orders"."status"::text, "public"."orders"."estimatedDelivery", "public"."orders"."installedAt", "public"."orders"."completedAt", "public"."orders"."warrantyUntil", "public"."orders"."internalNotes", "public"."orders"."createdAt", "public"."orders"."updatedAt" FROM "public"."orders" WHERE 1=1 ORDER BY "public"."orders"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."role" = CAST($1::text AS "public"."Role") OFFSET $2) AS "sub"
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."userId", "public"."quotes"."customerName", "public"."quotes"."customerEmail", "public"."quotes"."customerPhone", "public"."quotes"."serviceStreet", "public"."quotes"."serviceNumber", "public"."quotes"."serviceComplement", "public"."quotes"."serviceNeighborhood", "public"."quotes"."serviceCity", "public"."quotes"."serviceState", "public"."quotes"."serviceZipCode", "public"."quotes"."subtotal", "public"."quotes"."discount", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."validUntil", "public"."quotes"."internalNotes", "public"."quotes"."customerNotes", "public"."quotes"."source"::text, "public"."quotes"."createdAt", "public"."quotes"."updatedAt", "public"."quotes"."sentAt", "public"."quotes"."viewedAt", "public"."quotes"."acceptedAt" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) ORDER BY "public"."quotes"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."createdAt" <= $2 AND "public"."orders"."paymentStatus" = CAST($3::text AS "public"."PaymentStatus")) OFFSET $4) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE "public"."quotes"."status" IN (CAST($1::text AS "public"."QuoteStatus"),CAST($2::text AS "public"."QuoteStatus")) OFFSET $3) AS "sub"
prisma:query SELECT SUM("total") AS "_sum$total" FROM (SELECT "public"."orders"."total" FROM "public"."orders" WHERE ("public"."orders"."createdAt" >= $1 AND "public"."orders"."paymentStatus" = CAST($2::text AS "public"."PaymentStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."appointments"."id" FROM "public"."appointments" WHERE ("public"."appointments"."scheduledDate" >= $1 AND "public"."appointments"."scheduledDate" < $2 AND "public"."appointments"."status" IN (CAST($3::text AS "public"."AppointmentStatus"),CAST($4::text AS "public"."AppointmentStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."conversations"."id" FROM "public"."conversations" WHERE "public"."conversations"."status" = CAST($1::text AS "public"."ConversationStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."quotes"."id" FROM "public"."quotes" WHERE 1=1 OFFSET $1) AS "sub"
[DEBUG] 2025-12-19T04:00:59.645Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:00:59.646Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:00:59.646Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /admin?_rsc=jirn6 200 in 575ms
 GET /images/cta-pattern.svg 404 in 418ms
 GET /images/hero-pattern.svg 404 in 432ms
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
[SSE] Error fetching messages: TypeError: Cannot read properties of undefined (reading 'findMany')
    at Timeout.eval [as _onTimeout] (webpack-internal:///(rsc)/./src/app/api/whatsapp/stream/route.ts:42:111)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
 GET /api/whatsapp/stream 200 in 83185ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 233ms
 GET / 200 in 598ms
 GET /images/hero-pattern.svg 404 in 160ms
 GET /images/cta-pattern.svg 404 in 289ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 792ms (834 modules)
 âœ“ Compiled (836 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /manifest.webmanifest 200 in 2431ms
[DEBUG] 2025-12-19T04:01:29.848Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:01:29.849Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:01:29.849Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 2299ms
[DEBUG] 2025-12-19T04:01:30.002Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:01:30.003Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:01:30.003Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 131ms
[DEBUG] 2025-12-19T04:01:30.119Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:01:30.119Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:01:30.120Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 106ms
[DEBUG] 2025-12-19T04:01:30.269Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:01:30.269Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:01:30.269Z - [AUTH] Session created { userId: '81628a46-5e97-437a-9488-32d6a79e9d58', role: 'ADMIN' }
 GET /api/auth/session 200 in 120ms
 GET /api/auth/csrf 200 in 212ms
 POST /api/auth/signout 200 in 176ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 731ms
 GET /images/hero-pattern.svg 404 in 910ms
 GET / 200 in 3594ms
 GET /images/cta-pattern.svg 404 in 800ms
 GET /manifest.webmanifest 200 in 811ms
 GET /api/auth/session 200 in 741ms
 GET /api/auth/session 200 in 205ms
 GET /api/auth/session 200 in 175ms
 GET /api/auth/session 200 in 122ms
 âœ“ Compiled in 4.3s (1381 modules)
 GET /images/hero-pattern.svg 404 in 587ms
 GET /images/cta-pattern.svg 404 in 580ms
 GET /images/hero-pattern.svg 404 in 616ms
 GET /images/cta-pattern.svg 404 in 769ms
 GET /icons/icon-144x144.png 404 in 445ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 430ms
 GET / 200 in 1147ms
 GET /images/hero-pattern.svg 404 in 397ms
 GET /images/cta-pattern.svg 404 in 414ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 4.5s (831 modules)
 âœ“ Compiled (838 modules)
 GET /manifest.webmanifest 200 in 7514ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /icon.png?4a0e2032a7eb3a55 200 in 7982ms
 GET /api/auth/session 200 in 6872ms
 GET /api/auth/session 200 in 254ms
 GET /api/auth/session 200 in 157ms
 GET /api/auth/session 200 in 174ms
 â—‹ Compiling /orcamento ...
 âœ“ Compiled /orcamento in 12.2s (2306 modules)
 â—‹ Compiling /produtos ...
 âœ“ Compiled /produtos in 4.4s (2293 modules)
 â—‹ Compiling /_not-found ...
 âœ“ Compiled /_not-found in 1665ms (1288 modules)
 GET /images/products/box-premium.jpg 404 in 2789ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-premium.jpg received null
 GET /images/products/box-incolor.jpg 404 in 2801ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-incolor.jpg received null
 GET /images/products/guarda-corpo.jpg 404 in 2826ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo.jpg received null
 GET /images/products/espelho-led.jpg 404 in 2854ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-led.jpg received null
 GET /images/products/espelho-bisotado.jpg 404 in 2900ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-bisotado.jpg received null
 GET /images/products/divisoria.jpg 404 in 2900ms
 â¨¯ The requested resource isn't a valid image for /images/products/divisoria.jpg received null
 GET /images/products/porta-correr.jpg 404 in 298ms
 â¨¯ The requested resource isn't a valid image for /images/products/porta-correr.jpg received null
 GET /images/products/fachada.jpg 404 in 330ms
 â¨¯ The requested resource isn't a valid image for /images/products/fachada.jpg received null
 GET /images/products/tampo.jpg 404 in 351ms
 â¨¯ The requested resource isn't a valid image for /images/products/tampo.jpg received null
 GET /images/products/box-canto.jpg 404 in 237ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-canto.jpg received null
 GET /images/products/guarda-corpo-inox.jpg 404 in 287ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo-inox.jpg received null
 GET /images/products/janela.jpg 404 in 305ms
 â¨¯ The requested resource isn't a valid image for /images/products/janela.jpg received null
 GET /images/products/box-premium.jpg 404 in 255ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-premium.jpg received null
 GET /images/products/box-incolor.jpg 404 in 279ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-incolor.jpg received null
 GET /images/products/guarda-corpo.jpg 404 in 318ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo.jpg received null
 GET /images/products/espelho-led.jpg 404 in 345ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-led.jpg received null
 GET /images/products/espelho-bisotado.jpg 404 in 264ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-bisotado.jpg received null
 GET /images/products/divisoria.jpg 404 in 276ms
 â¨¯ The requested resource isn't a valid image for /images/products/divisoria.jpg received null
 GET /images/products/porta-correr.jpg 404 in 304ms
 â¨¯ The requested resource isn't a valid image for /images/products/porta-correr.jpg received null
 GET /images/products/fachada.jpg 404 in 327ms
 â¨¯ The requested resource isn't a valid image for /images/products/fachada.jpg received null
 GET /images/products/tampo.jpg 404 in 82ms
 â¨¯ The requested resource isn't a valid image for /images/products/tampo.jpg received null
 â—‹ Compiling /api/ai/tts ...
 âœ“ Compiled /api/ai/tts in 1092ms (1278 modules)
 POST /api/ai/tts 200 in 5859ms
 â—‹ Compiling /icon.png ...
 âœ“ Compiled /icon.png in 1394ms (1307 modules)
 GET /icon.png?4a0e2032a7eb3a55 200 in 1664ms
 POST /api/ai/tts 200 in 3351ms
 POST /api/ai/tts 200 in 2886ms
 POST /api/ai/tts 200 in 3723ms
 POST /api/ai/tts 200 in 2532ms
 GET /produtos 200 in 1428ms
 GET /images/products/box-premium.jpg 404 in 612ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-premium.jpg received null
 GET /images/products/box-incolor.jpg 404 in 689ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-incolor.jpg received null
 GET /images/products/guarda-corpo.jpg 404 in 726ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo.jpg received null
 GET /images/products/espelho-led.jpg 404 in 1032ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-led.jpg received null
 GET /images/products/espelho-bisotado.jpg 404 in 597ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-bisotado.jpg received null
 GET /images/products/divisoria.jpg 404 in 613ms
 â¨¯ The requested resource isn't a valid image for /images/products/divisoria.jpg received null
 GET /images/products/porta-correr.jpg 404 in 589ms
 â¨¯ The requested resource isn't a valid image for /images/products/porta-correr.jpg received null
 GET /images/products/fachada.jpg 404 in 483ms
 â¨¯ The requested resource isn't a valid image for /images/products/fachada.jpg received null
 GET /images/products/tampo.jpg 404 in 480ms
 â¨¯ The requested resource isn't a valid image for /images/products/tampo.jpg received null
 GET /icon.png?4a0e2032a7eb3a55 200 in 490ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 183ms
 GET /icon.png?4a0e2032a7eb3a55 200 in 1067ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 3.1s (1312 modules)
 âœ“ Compiled (1314 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /manifest.webmanifest 200 in 6989ms
[DEBUG] 2025-12-19T04:21:51.859Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:21:51.865Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:21:51.866Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 6450ms
[DEBUG] 2025-12-19T04:21:52.066Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:21:52.066Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:21:52.067Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 171ms
[DEBUG] 2025-12-19T04:21:52.266Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:21:52.267Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:21:52.267Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 183ms
[DEBUG] 2025-12-19T04:21:52.775Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:21:52.775Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:21:52.775Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 432ms
 â—‹ Compiling /api/ai/chat ...
 âœ“ Compiled /api/ai/chat/export-quote in 3.5s (1504 modules)
 âœ“ Compiled (1508 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:22:15.415Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:22:15.416Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:22:15.416Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
[DEBUG] 2025-12-19T04:22:15.416Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:22:15.417Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:22:15.417Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:error 
Invalid `prisma.aiConversation.findFirst()` invocation:

{
  where: {
    sessionId: "session-1766118124737-et5yyrxq6",
    userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac",
    ~~~~~~
?   AND?: AiConversationWhereInput | AiConversationWhereInput[],
?   OR?: AiConversationWhereInput[],
?   NOT?: AiConversationWhereInput | AiConversationWhereInput[],
?   id?: StringFilter | String,
?   customerName?: StringNullableFilter | String | Null,
?   customerEmail?: StringNullableFilter | String | Null,
?   customerPhone?: StringNullableFilter | String | Null,
?   quoteContext?: JsonNullableFilter,
?   quoteId?: StringNullableFilter | String | Null,
?   status?: StringFilter | String,
?   createdAt?: DateTimeFilter | DateTime,
?   updatedAt?: DateTimeFilter | DateTime,
?   lastMessageAt?: DateTimeFilter | DateTime,
?   quote?: QuoteNullableScalarRelationFilter | QuoteWhereInput | Null,
?   messages?: AiMessageListRelationFilter
  },
  orderBy: {
    createdAt: "desc"
  },
  select: {
    id: true,
    quoteContext: true,
    status: true
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:15.534Z - Error checking quote export status {
  error: PrismaClientValidationError: 
  Invalid `prisma.aiConversation.findFirst()` invocation:
  
  {
    where: {
      sessionId: "session-1766118124737-et5yyrxq6",
      userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac",
      ~~~~~~
  ?   AND?: AiConversationWhereInput | AiConversationWhereInput[],
  ?   OR?: AiConversationWhereInput[],
  ?   NOT?: AiConversationWhereInput | AiConversationWhereInput[],
  ?   id?: StringFilter | String,
  ?   customerName?: StringNullableFilter | String | Null,
  ?   customerEmail?: StringNullableFilter | String | Null,
  ?   customerPhone?: StringNullableFilter | String | Null,
  ?   quoteContext?: JsonNullableFilter,
  ?   quoteId?: StringNullableFilter | String | Null,
  ?   status?: StringFilter | String,
  ?   createdAt?: DateTimeFilter | DateTime,
  ?   updatedAt?: DateTimeFilter | DateTime,
  ?   lastMessageAt?: DateTimeFilter | DateTime,
  ?   quote?: QuoteNullableScalarRelationFilter | QuoteWhereInput | Null,
  ?   messages?: AiMessageListRelationFilter
    },
    orderBy: {
      createdAt: "desc"
    },
    select: {
      id: true,
      quoteContext: true,
      status: true
    }
  }
  
  Unknown argument `userId`. Available options are marked with ?.
      at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
      at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
      at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
      at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
      at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
      at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/export-quote/route.ts:166:30)
      at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
      at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
      at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
      at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
      at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
      at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
      at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
      at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
      at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
      at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
      at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
      at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
      at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
      at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
      at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
      at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
      at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
      at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
    clientVersion: '6.19.0'
  }
}
 GET /api/ai/chat/export-quote?sessionId=session-1766118124737-et5yyrxq6 500 in 2676ms
prisma:query SELECT "public"."products"."id", "public"."products"."category"::text, "public"."products"."name", "public"."products"."subcategory", "public"."products"."priceType"::text, "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax" FROM "public"."products" WHERE "public"."products"."isActive" = $1 ORDER BY "public"."products"."category" ASC, "public"."products"."name" ASC OFFSET $2
[DEBUG] 2025-12-19T04:22:15.645Z - [AI CHAT] Product catalog cached 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."category"::text, "public"."products"."description", "public"."products"."shortDescription", "public"."products"."basePrice", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."basePrice" ASC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:22:15.661Z - Smart product suggestions added to context {
  category: 'PORTAS',
  productCount: 5,
  userMessage: 'oi gostaria de comprar uma porta'
}
prisma:query BEGIN
prisma:query INSERT INTO "public"."ai_conversations" ("id","sessionId","status","createdAt","updatedAt","lastMessageAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_conversations"."id"
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query COMMIT
[DEBUG] 2025-12-19T04:22:15.681Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118124737-et5yyrxq6'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118124737-et5yyrxq6"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:15.686Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118124737-et5yyrxq6"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:22:17.136Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 1183,
  tokensUsed: 4058,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 6374ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:17.146Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
 â—‹ Compiling /api/ai/chat/check-updates ...
 âœ“ Compiled /api/ai/chat/check-updates in 727ms (1510 modules)
[DEBUG] 2025-12-19T04:22:18.013Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:18.017Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 861ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:22:19.297Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:22:19.297Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:22:19.298Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 110ms
[DEBUG] 2025-12-19T04:22:26.228Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:26.231Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 144ms
[DEBUG] 2025-12-19T04:22:26.345Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:26.351Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 113ms
 POST /api/ai/tts 200 in 4625ms
 GET /icon.png?4a0e2032a7eb3a55 200 in 111ms
[DEBUG] 2025-12-19T04:22:36.192Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:36.196Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 88ms
[DEBUG] 2025-12-19T04:22:46.165Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:46.168Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 61ms
[DEBUG] 2025-12-19T04:22:50.208Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:50.213Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 133ms
[DEBUG] 2025-12-19T04:22:50.305Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:50.309Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 92ms
 POST /api/ai/tts 200 in 4752ms
[DEBUG] 2025-12-19T04:22:56.539Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:56.581Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 1032ms
[DEBUG] 2025-12-19T04:22:57.099Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:22:57.120Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 500ms
[DEBUG] 2025-12-19T04:23:01.159Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:01.164Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 433ms
 POST /api/ai/tts 200 in 6213ms
[DEBUG] 2025-12-19T04:23:02.008Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:02.013Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 204ms
[DEBUG] 2025-12-19T04:23:02.121Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:22:04.738Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:02.125Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A22%3A04.738Z 500 in 105ms
 POST /api/ai/tts 200 in 7118ms
 GET /produtos 200 in 4362ms
 GET /images/products/guarda-corpo.jpg 404 in 944ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo.jpg received null
 GET /images/products/box-premium.jpg 404 in 920ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-premium.jpg received null
 GET /images/products/box-incolor.jpg 404 in 1008ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-incolor.jpg received null
 GET /images/products/espelho-led.jpg 404 in 562ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-led.jpg received null
 GET /images/products/espelho-bisotado.jpg 404 in 541ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-bisotado.jpg received null
 GET /images/products/divisoria.jpg 404 in 539ms
 â¨¯ The requested resource isn't a valid image for /images/products/divisoria.jpg received null
 GET /icon.png?4a0e2032a7eb3a55 200 in 1933ms
 GET /images/products/porta-correr.jpg 404 in 1842ms
 â¨¯ The requested resource isn't a valid image for /images/products/porta-correr.jpg received null
 GET /images/products/fachada.jpg 404 in 1895ms
 â¨¯ The requested resource isn't a valid image for /images/products/fachada.jpg received null
 GET /images/products/tampo.jpg 404 in 1987ms
 â¨¯ The requested resource isn't a valid image for /images/products/tampo.jpg received null
 GET /images/products/box-canto.jpg 404 in 708ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-canto.jpg received null
 GET /images/products/guarda-corpo-inox.jpg 404 in 763ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo-inox.jpg received null
 GET /images/products/janela.jpg 404 in 818ms
 â¨¯ The requested resource isn't a valid image for /images/products/janela.jpg received null
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A21.508Z 200 in 3488ms
 GET /api/auth/session 200 in 1119ms
 GET /manifest.webmanifest 200 in 3508ms
[DEBUG] 2025-12-19T04:23:27.289Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:21.508Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:27.535Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:23:27.702Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:23:27.703Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:23:27.704Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /produtos 200 in 10975ms
 GET /images/products/guarda-corpo.jpg 404 in 898ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo.jpg received null
 GET /images/products/box-incolor.jpg 404 in 897ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-incolor.jpg received null
 GET /images/products/box-premium.jpg 404 in 786ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-premium.jpg received null
 GET /images/products/espelho-led.jpg 404 in 666ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-led.jpg received null
 GET /images/products/espelho-bisotado.jpg 404 in 694ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-bisotado.jpg received null
 GET /images/products/divisoria.jpg 404 in 749ms
 â¨¯ The requested resource isn't a valid image for /images/products/divisoria.jpg received null
 GET /images/products/porta-correr.jpg 404 in 791ms
 â¨¯ The requested resource isn't a valid image for /images/products/porta-correr.jpg received null
 GET /images/products/fachada.jpg 404 in 853ms
 â¨¯ The requested resource isn't a valid image for /images/products/fachada.jpg received null
 GET /images/products/tampo.jpg 404 in 1033ms
 â¨¯ The requested resource isn't a valid image for /images/products/tampo.jpg received null
 GET /icon.png?4a0e2032a7eb3a55 200 in 422ms
 GET /icon.png?4a0e2032a7eb3a55 200 in 581ms
 GET /manifest.webmanifest 200 in 609ms
[DEBUG] 2025-12-19T04:23:34.914Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:23:34.915Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:23:34.915Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 486ms
[DEBUG] 2025-12-19T04:23:35.158Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:23:35.159Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:23:35.159Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 199ms
[DEBUG] 2025-12-19T04:23:35.344Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:23:35.344Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:23:35.344Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 157ms
[DEBUG] 2025-12-19T04:23:35.532Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:23:35.533Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:23:35.533Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 158ms
[DEBUG] 2025-12-19T04:23:39.421Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:39.426Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 109ms
[DEBUG] 2025-12-19T04:23:39.535Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:39.538Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 106ms
[DEBUG] 2025-12-19T04:23:43.598Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:43.611Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 216ms
[DEBUG] 2025-12-19T04:23:45.847Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
[DEBUG] 2025-12-19T04:23:45.851Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:23:45.851Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:23:45.851Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:45.854Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 368ms
prisma:query SELECT "public"."products"."id", "public"."products"."category"::text, "public"."products"."name", "public"."products"."subcategory", "public"."products"."priceType"::text, "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax" FROM "public"."products" WHERE "public"."products"."isActive" = $1 ORDER BY "public"."products"."category" ASC, "public"."products"."name" ASC OFFSET $2
[DEBUG] 2025-12-19T04:23:45.877Z - [AI CHAT] Product catalog cached 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."category"::text, "public"."products"."description", "public"."products"."shortDescription", "public"."products"."basePrice", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."basePrice" ASC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:23:45.893Z - Smart product suggestions added to context {
  category: 'PORTAS',
  productCount: 5,
  userMessage: 'Gostaria de comprar uma porta?'
}
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:23:45.901Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118218707-r9gs29q90'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:45.907Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:23:46.898Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 690,
  tokensUsed: 4136,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 1473ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:46.905Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:23:46.998Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:47.001Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 85ms
[DEBUG] 2025-12-19T04:23:49.018Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:23:49.018Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:23:49.019Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 92ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 73ms
[DEBUG] 2025-12-19T04:23:57.047Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:23:57.052Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 128ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 143ms
[DEBUG] 2025-12-19T04:24:02.625Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:02.636Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 281ms
[DEBUG] 2025-12-19T04:24:04.513Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:04.520Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 404ms
[DEBUG] 2025-12-19T04:24:04.534Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:24:04.536Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:24:04.536Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
[DEBUG] 2025-12-19T04:24:04.561Z - [AI CHAT] Using cached product catalog 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."category"::text, "public"."products"."description", "public"."products"."shortDescription", "public"."products"."basePrice", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."basePrice" ASC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:24:04.587Z - Smart product suggestions added to context {
  category: 'PORTAS',
  productCount: 5,
  userMessage: 'Porta automÃ¡tica.'
}
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:24:04.598Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118218707-r9gs29q90'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:04.609Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:24:06.046Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 1042,
  tokensUsed: 4288,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 2076ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:06.056Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:24:06.174Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:24:06.174Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:24:06.174Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 227ms
[DEBUG] 2025-12-19T04:24:06.236Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:06.241Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 139ms
[DEBUG] 2025-12-19T04:24:08.154Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:24:08.155Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:24:08.155Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 80ms
[DEBUG] 2025-12-19T04:24:16.153Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:16.157Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 80ms
[DEBUG] 2025-12-19T04:24:26.158Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:26.161Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 84ms
[DEBUG] 2025-12-19T04:24:34.769Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:34.773Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 100ms
[DEBUG] 2025-12-19T04:24:34.947Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:34.950Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 79ms
[DEBUG] 2025-12-19T04:24:35.358Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:35.361Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 70ms
[DEBUG] 2025-12-19T04:24:35.607Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:35.611Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 102ms
[DEBUG] 2025-12-19T04:24:36.399Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:36.402Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 84ms
[DEBUG] 2025-12-19T04:24:36.748Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:36.752Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 106ms
[DEBUG] 2025-12-19T04:24:37.727Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:37.733Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 101ms
[DEBUG] 2025-12-19T04:24:38.104Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:38.108Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 84ms
[DEBUG] 2025-12-19T04:24:38.345Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:38.349Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 77ms
[DEBUG] 2025-12-19T04:24:38.559Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:38.565Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 92ms
[DEBUG] 2025-12-19T04:24:39.018Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:39.022Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 86ms
[DEBUG] 2025-12-19T04:24:39.421Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:39.424Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 81ms
[DEBUG] 2025-12-19T04:24:39.568Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:39.572Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 75ms
[DEBUG] 2025-12-19T04:24:39.700Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:39.702Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 65ms
[DEBUG] 2025-12-19T04:24:39.867Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:39.871Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 80ms
[DEBUG] 2025-12-19T04:24:40.019Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:40.023Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 85ms
[DEBUG] 2025-12-19T04:24:40.146Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:40.148Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 70ms
[DEBUG] 2025-12-19T04:24:40.328Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:40.332Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 101ms
[DEBUG] 2025-12-19T04:24:40.482Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:40.486Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 96ms
[DEBUG] 2025-12-19T04:24:40.622Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:40.626Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 95ms
[DEBUG] 2025-12-19T04:24:40.762Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:40.765Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 81ms
[DEBUG] 2025-12-19T04:24:40.938Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:40.942Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 101ms
[DEBUG] 2025-12-19T04:24:47.972Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:47.979Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 95ms
[DEBUG] 2025-12-19T04:24:49.452Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
[DEBUG] 2025-12-19T04:24:49.456Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:24:49.457Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:24:49.457Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:49.461Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 232ms
[DEBUG] 2025-12-19T04:24:49.473Z - [AI CHAT] Using cached product catalog 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."category"::text, "public"."products"."description", "public"."products"."shortDescription", "public"."products"."basePrice", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."basePrice" ASC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:24:49.484Z - Smart product suggestions added to context {
  category: 'PORTAS',
  productCount: 5,
  userMessage: 'Uma porta de 1 m de largura e 2 de altura.'
}
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:24:49.489Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118218707-r9gs29q90'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:49.494Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[INFO] 2025-12-19T04:24:50.700Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:24:50.704Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 832,
  tokensUsed: 4419,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 1549ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:50.711Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:24:50.805Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:50.810Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 86ms
[DEBUG] 2025-12-19T04:24:52.801Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:24:52.801Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:24:52.801Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 75ms
 â—‹ Compiling /api/ai/products/suggestions ...
 âœ“ Compiled /api/ai/products/suggestions in 1603ms (1474 modules)
[DEBUG] 2025-12-19T04:24:55.284Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."description", "public"."products"."shortDescription", "public"."products"."category"::text, "public"."products"."images", "public"."products"."thumbnail", "public"."products"."priceType"::text, "public"."products"."basePrice", "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes", "public"."products"."thicknesses", "public"."products"."isFeatured" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."isFeatured" DESC, "public"."products"."createdAt" DESC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:24:55.287Z - Product suggestions fetched { category: 'PORTAS', count: 3, limit: 3 }
 GET /api/ai/products/suggestions?category=PORTAS&limit=3 200 in 2471ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:55.294Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 2414ms
 GET /products/porta-pivotante-premium-thumb.jpg 404 in 532ms
 GET /products/porta-pivotante-thumb.jpg 404 in 541ms
[DEBUG] 2025-12-19T04:24:55.922Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:55.927Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 567ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:24:57.546Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:24:57.546Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:24:57.546Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 190ms
[DEBUG] 2025-12-19T04:24:57.660Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:24:57.663Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 86ms
[DEBUG] 2025-12-19T04:25:07.651Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:07.654Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 63ms
[DEBUG] 2025-12-19T04:25:17.666Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:17.671Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 88ms
[DEBUG] 2025-12-19T04:25:27.671Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:27.675Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 96ms
[DEBUG] 2025-12-19T04:25:32.490Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:32.493Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 79ms
[DEBUG] 2025-12-19T04:25:32.586Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:32.589Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 88ms
[DEBUG] 2025-12-19T04:25:32.978Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:32.982Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 81ms
[DEBUG] 2025-12-19T04:25:33.160Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:33.164Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 76ms
[DEBUG] 2025-12-19T04:25:33.436Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:33.440Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 88ms
[DEBUG] 2025-12-19T04:25:33.629Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:33.636Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 93ms
[DEBUG] 2025-12-19T04:25:33.807Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:33.811Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 93ms
[DEBUG] 2025-12-19T04:25:34.002Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:34.006Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 88ms
[DEBUG] 2025-12-19T04:25:34.142Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:34.146Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 75ms
[DEBUG] 2025-12-19T04:25:34.384Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:34.387Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 78ms
[DEBUG] 2025-12-19T04:25:34.610Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:34.613Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 71ms
[DEBUG] 2025-12-19T04:25:35.443Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:25:35.444Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:25:35.444Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
[DEBUG] 2025-12-19T04:25:35.450Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:35.459Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 194ms
prisma:query SELECT "public"."products"."id", "public"."products"."category"::text, "public"."products"."name", "public"."products"."subcategory", "public"."products"."priceType"::text, "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax" FROM "public"."products" WHERE "public"."products"."isActive" = $1 ORDER BY "public"."products"."category" ASC, "public"."products"."name" ASC OFFSET $2
[DEBUG] 2025-12-19T04:25:35.490Z - [AI CHAT] Product catalog cached 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:25:35.504Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118218707-r9gs29q90'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:35.508Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[INFO] 2025-12-19T04:25:36.672Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:25:36.680Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 794,
  tokensUsed: 4139,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 1460ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:36.689Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:25:36.820Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:36.824Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 105ms
[DEBUG] 2025-12-19T04:25:38.803Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:25:38.803Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:25:38.803Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 83ms
[DEBUG] 2025-12-19T04:25:38.940Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:38.944Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 103ms
[DEBUG] 2025-12-19T04:25:45.423Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:45.426Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 101ms
[DEBUG] 2025-12-19T04:25:48.286Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
[DEBUG] 2025-12-19T04:25:48.287Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:25:48.287Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:25:48.287Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:48.289Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 134ms
[DEBUG] 2025-12-19T04:25:48.298Z - [AI CHAT] Using cached product catalog 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."category"::text, "public"."products"."description", "public"."products"."shortDescription", "public"."products"."basePrice", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."basePrice" ASC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:25:48.307Z - Smart product suggestions added to context {
  category: 'PORTAS',
  productCount: 5,
  userMessage: 'Selecionei o produto: Porta Pivotante'
}
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:25:48.311Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118218707-r9gs29q90'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:48.315Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[INFO] 2025-12-19T04:25:49.702Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:25:49.706Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 1022,
  tokensUsed: 4705,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 1584ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:49.714Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:25:49.871Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:49.876Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 124ms
[DEBUG] 2025-12-19T04:25:51.827Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:25:51.828Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:25:51.828Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 74ms
[DEBUG] 2025-12-19T04:25:51.915Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:25:51.919Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 70ms
[DEBUG] 2025-12-19T04:26:01.964Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:01.971Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 119ms
[DEBUG] 2025-12-19T04:26:11.968Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:11.973Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 119ms
[DEBUG] 2025-12-19T04:26:19.057Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:19.063Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 114ms
[DEBUG] 2025-12-19T04:26:19.711Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:19.714Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 99ms
[DEBUG] 2025-12-19T04:26:19.914Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:19.918Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 99ms
[DEBUG] 2025-12-19T04:26:20.219Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:20.223Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 98ms
[DEBUG] 2025-12-19T04:26:20.439Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:20.443Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 84ms
[DEBUG] 2025-12-19T04:26:20.609Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:20.612Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 75ms
[DEBUG] 2025-12-19T04:26:20.740Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:20.744Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 80ms
[DEBUG] 2025-12-19T04:26:21.205Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:21.209Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 84ms
[DEBUG] 2025-12-19T04:26:21.592Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:21.595Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 75ms
[DEBUG] 2025-12-19T04:26:22.053Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:22.057Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 84ms
[DEBUG] 2025-12-19T04:26:22.182Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:22.186Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 72ms
[DEBUG] 2025-12-19T04:26:22.984Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:22.987Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 91ms
[DEBUG] 2025-12-19T04:26:25.000Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:25.005Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 124ms
[DEBUG] 2025-12-19T04:26:25.467Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:25.471Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 113ms
[DEBUG] 2025-12-19T04:26:25.663Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:25.668Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 112ms
[DEBUG] 2025-12-19T04:26:26.366Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:26:26.367Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:26:26.367Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
[DEBUG] 2025-12-19T04:26:26.376Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:26.383Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 385ms
[DEBUG] 2025-12-19T04:26:26.401Z - [AI CHAT] Using cached product catalog 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:26:26.436Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118218707-r9gs29q90'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:26.449Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118218707-r9gs29q90"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[INFO] 2025-12-19T04:26:27.630Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:26:27.639Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 767,
  tokensUsed: 4422,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 1689ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:27.650Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:26:27.782Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:27.787Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 105ms
[DEBUG] 2025-12-19T04:26:29.787Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:26:29.787Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:26:29.787Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 107ms
[DEBUG] 2025-12-19T04:26:29.911Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:29.916Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 98ms
[DEBUG] 2025-12-19T04:26:39.909Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:39.913Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 89ms
[DEBUG] 2025-12-19T04:26:49.943Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:26:49.948Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 123ms
[DEBUG] 2025-12-19T04:27:01.230Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:23:38.708Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:01.282Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A23%3A38.708Z 500 in 1322ms
 âœ“ Compiled in 6.4s (2491 modules)
 âœ“ Compiled in 0ms (1471 modules)
 âœ“ Compiled in 1ms (1471 modules)
 âœ“ Compiled in 1ms (1471 modules)
[DEBUG] 2025-12-19T04:27:09.847Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:09.953Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 7619ms
[DEBUG] 2025-12-19T04:27:12.504Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:12.522Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 233ms
 âœ“ Compiled in 1162ms (2477 modules)
[DEBUG] 2025-12-19T04:27:17.124Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:17.274Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 323ms
[DEBUG] 2025-12-19T04:27:27.079Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:27.084Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 114ms
[DEBUG] 2025-12-19T04:27:37.074Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:37.080Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 108ms
 âœ“ Compiled in 1259ms (2283 modules)
[DEBUG] 2025-12-19T04:27:40.775Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:40.782Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 2319ms
[DEBUG] 2025-12-19T04:27:48.546Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:48.550Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 74ms
[DEBUG] 2025-12-19T04:27:58.564Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:27:58.570Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 96ms
[DEBUG] 2025-12-19T04:28:08.635Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:28:08.641Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 170ms
[DEBUG] 2025-12-19T04:28:18.630Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:28:18.635Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 161ms
[DEBUG] 2025-12-19T04:28:28.541Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:28:28.544Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 76ms
[DEBUG] 2025-12-19T04:28:40.159Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:28:40.168Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 1518ms
[DEBUG] 2025-12-19T04:28:48.535Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:28:48.538Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 74ms
[DEBUG] 2025-12-19T04:28:58.527Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:28:58.530Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 65ms
[DEBUG] 2025-12-19T04:29:08.514Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:29:08.517Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 57ms
[DEBUG] 2025-12-19T04:29:18.600Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:29:18.605Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 137ms
[DEBUG] 2025-12-19T04:29:28.550Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:29:28.553Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 82ms
[DEBUG] 2025-12-19T04:29:38.533Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:29:38.536Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 64ms
[DEBUG] 2025-12-19T04:29:48.532Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:29:48.535Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 63ms
[DEBUG] 2025-12-19T04:29:58.520Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:29:58.523Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 56ms
[DEBUG] 2025-12-19T04:30:08.544Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:30:08.547Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 85ms
[DEBUG] 2025-12-19T04:30:18.541Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:30:18.545Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 81ms
[DEBUG] 2025-12-19T04:30:28.530Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:30:28.532Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 67ms
[DEBUG] 2025-12-19T04:30:38.520Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:30:38.522Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 59ms
 â—‹ Compiling /api/ai/chat ...
 âœ“ Compiled /api/ai/chat in 1655ms (1467 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:30:44.450Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:30:44.451Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:30:44.451Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."products"."id", "public"."products"."category"::text, "public"."products"."name", "public"."products"."subcategory", "public"."products"."priceType"::text, "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax" FROM "public"."products" WHERE "public"."products"."isActive" = $1 ORDER BY "public"."products"."category" ASC, "public"."products"."name" ASC OFFSET $2
[DEBUG] 2025-12-19T04:30:44.491Z - [AI CHAT] Product catalog cached 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."category"::text, "public"."products"."description", "public"."products"."shortDescription", "public"."products"."basePrice", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."basePrice" ASC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:30:44.518Z - Smart product suggestions added to context {
  category: 'PORTAS',
  productCount: 5,
  userMessage: 'gostari ade uma porta'
}
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:30:44.534Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118422215-uukk64iss'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118422215-uukk64iss"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:30:44.537Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118422215-uukk64iss"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
 â—‹ Compiling /api/ai/chat/export-quote ...
 âœ“ Compiled /api/ai/chat/export-quote in 1076ms (1471 modules)
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:30:45.733Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:30:45.733Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:30:45.734Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 1332ms
[INFO] 2025-12-19T04:30:46.269Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
 â—‹ Compiling /api/ai/products/suggestions ...
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:30:46.826Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 1085,
  tokensUsed: 4915,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 4537ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:30:46.838Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
 âœ“ Compiled /api/ai/products/suggestions in 1900ms (1473 modules)
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."description", "public"."products"."shortDescription", "public"."products"."category"::text, "public"."products"."images", "public"."products"."thumbnail", "public"."products"."priceType"::text, "public"."products"."basePrice", "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes", "public"."products"."thicknesses", "public"."products"."isFeatured" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."isFeatured" DESC, "public"."products"."createdAt" DESC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:30:47.772Z - Product suggestions fetched { category: 'PORTAS', count: 3, limit: 3 }
 GET /api/ai/products/suggestions?category=PORTAS&limit=3 200 in 2015ms
 â—‹ Compiling /_not-found ...
 âœ“ Compiled /_not-found in 1179ms (1474 modules)
[DEBUG] 2025-12-19T04:30:49.963Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:30:49.988Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 1432ms
 GET /products/porta-pivotante-thumb.jpg 404 in 2237ms
 GET /products/porta-pivotante-premium-thumb.jpg 404 in 2245ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:30:50.167Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:30:50.167Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:30:50.167Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 182ms
[DEBUG] 2025-12-19T04:30:58.517Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:30:58.519Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 51ms
[DEBUG] 2025-12-19T04:31:08.529Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:31:08.532Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 65ms
 GET /images/products/box-canto.jpg 404 in 113ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-canto.jpg received null
 GET /images/products/guarda-corpo-inox.jpg 404 in 123ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo-inox.jpg received null
 GET /images/products/janela.jpg 404 in 142ms
 â¨¯ The requested resource isn't a valid image for /images/products/janela.jpg received null
[DEBUG] 2025-12-19T04:31:18.515Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:31:18.521Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 62ms
[DEBUG] 2025-12-19T04:31:28.550Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:31:28.553Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 79ms
[DEBUG] 2025-12-19T04:31:38.541Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:31:38.545Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 86ms
[DEBUG] 2025-12-19T04:31:48.506Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:31:48.508Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 50ms
[DEBUG] 2025-12-19T04:31:51.137Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:31:51.137Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:31:51.137Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."products"."id", "public"."products"."category"::text, "public"."products"."name", "public"."products"."subcategory", "public"."products"."priceType"::text, "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax" FROM "public"."products" WHERE "public"."products"."isActive" = $1 ORDER BY "public"."products"."category" ASC, "public"."products"."name" ASC OFFSET $2
[DEBUG] 2025-12-19T04:31:51.154Z - [AI CHAT] Product catalog cached 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."category"::text, "public"."products"."description", "public"."products"."shortDescription", "public"."products"."basePrice", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."basePrice" ASC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:31:51.169Z - Smart product suggestions added to context {
  category: 'PORTAS',
  productCount: 5,
  userMessage: 'Selecionei o produto: Porta Pivotante Premium'
}
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:31:51.176Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766118422215-uukk64iss'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118422215-uukk64iss"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:31:51.182Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766118422215-uukk64iss"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[DEBUG] 2025-12-19T04:31:52.193Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:31:52.193Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:31:52.193Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 199ms
[INFO] 2025-12-19T04:31:52.645Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:31:52.655Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 971,
  tokensUsed: 5059,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 2324ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:31:52.662Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:31:54.895Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:31:54.896Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:31:54.896Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT 1
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 259ms
[DEBUG] 2025-12-19T04:31:58.520Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:31:58.523Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 57ms
[DEBUG] 2025-12-19T04:32:08.519Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:32:08.522Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 52ms
[DEBUG] 2025-12-19T04:32:18.514Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:32:18.599Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 130ms
[DEBUG] 2025-12-19T04:32:28.523Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:32:28.525Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 57ms
[DEBUG] 2025-12-19T04:32:38.531Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:32:38.534Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 69ms
[DEBUG] 2025-12-19T04:32:48.597Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:32:48.603Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 149ms
[DEBUG] 2025-12-19T04:32:58.805Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:32:58.820Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 331ms
[DEBUG] 2025-12-19T04:33:08.548Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:33:08.552Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 80ms
[DEBUG] 2025-12-19T04:33:18.542Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:33:18.545Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 83ms
[DEBUG] 2025-12-19T04:33:28.556Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:33:28.562Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 91ms
[DEBUG] 2025-12-19T04:33:38.543Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:33:38.547Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 76ms
 âœ“ Compiled /api/ai/chat/export-quote in 5.1s (2297 modules)
 âœ“ Compiled in 1ms (1281 modules)
 âœ“ Compiled in 1ms (1281 modules)
 âœ“ Compiled in 0ms (1281 modules)
[DEBUG] 2025-12-19T04:33:49.622Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:33:49.660Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 5087ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:33:50.601Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:33:50.602Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:33:50.602Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 4024ms
[DEBUG] 2025-12-19T04:33:54.636Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:27:02.215Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:33:54.640Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A27%3A02.215Z 500 in 72ms
 âœ“ Compiled in 2.6s (2301 modules)
 âœ“ Compiled in 0ms (1281 modules)
 âœ“ Compiled in 1ms (1281 modules)
 âœ“ Compiled in 1ms (1281 modules)
[DEBUG] 2025-12-19T04:34:07.872Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:34:07.920Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 3830ms
[DEBUG] 2025-12-19T04:34:14.238Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:34:14.247Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 156ms
[DEBUG] 2025-12-19T04:34:24.335Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:34:24.343Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 269ms
 âœ“ Compiled in 4s (2301 modules)
 âœ“ Compiled in 0ms (1281 modules)
 âœ“ Compiled in 0ms (1281 modules)
 âœ“ Compiled in 1ms (1281 modules)
[DEBUG] 2025-12-19T04:34:34.057Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:34:34.123Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 5209ms
[DEBUG] 2025-12-19T04:34:39.316Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:34:39.324Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 454ms
[DEBUG] 2025-12-19T04:34:48.983Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:34:48.987Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 105ms
 â¨¯ ./src/components/chat/chat-assistido.tsx
Error: 
  [31mx[0m Unexpected token `motion`. Expected jsx identifier
     ,-[[36;1;4mD:\VERSATI GLASS\src\components\chat\chat-assistido.tsx[0m:760:1]
 [2m760[0m |   }
 [2m761[0m | 
 [2m762[0m |   return (
 [2m763[0m |     <motion.div
     : [31;1m     ^^^^^^[0m
 [2m764[0m |       initial={{ opacity: 0, y: 20, scale: 0.95 }}
 [2m765[0m |       animate={{ opacity: 1, y: 0, scale: 1 }}
 [2m766[0m |       exit={{ opacity: 0, y: 20, scale: 0.95 }}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/chat/chat-assistido.tsx
./src/components/shared/contact-hub.tsx
 â—‹ Compiling /_error ...
 âœ“ Compiled /_error in 72.5s (2523 modules)
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 86062ms
[DEBUG] 2025-12-19T04:36:25.290Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
[DEBUG] 2025-12-19T04:36:25.293Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
[DEBUG] 2025-12-19T04:36:25.295Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
[DEBUG] 2025-12-19T04:36:25.298Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:36:25.516Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
[ERROR] 2025-12-19T04:36:25.518Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
[ERROR] 2025-12-19T04:36:25.520Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
[ERROR] 2025-12-19T04:36:25.520Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 55668ms
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 46094ms
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 35936ms
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 23858ms
[DEBUG] 2025-12-19T04:36:25.786Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:36:25.804Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 801ms
[DEBUG] 2025-12-19T04:36:25.885Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
[DEBUG] 2025-12-19T04:36:25.887Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:36:25.897Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
[ERROR] 2025-12-19T04:36:25.898Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 247ms
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 245ms
[DEBUG] 2025-12-19T04:36:26.077Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:36:26.088Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 174ms
[DEBUG] 2025-12-19T04:36:26.442Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:36:26.470Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 229ms
[DEBUG] 2025-12-19T04:36:36.716Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:36:36.718Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 82ms
[DEBUG] 2025-12-19T04:36:46.709Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:36:46.712Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 81ms
[DEBUG] 2025-12-19T04:36:56.741Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:36:56.745Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 105ms
[DEBUG] 2025-12-19T04:37:07.115Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:37:07.123Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 480ms
[DEBUG] 2025-12-19T04:37:16.732Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:37:16.735Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 104ms
[DEBUG] 2025-12-19T04:37:26.710Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:37:26.793Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 161ms
[DEBUG] 2025-12-19T04:38:03.734Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:38:03.738Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 95ms
[DEBUG] 2025-12-19T04:39:03.764Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:39:03.769Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 130ms
[DEBUG] 2025-12-19T04:40:03.980Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:40:03.991Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 343ms
[DEBUG] 2025-12-19T04:41:03.799Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:41:03.804Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 159ms
[DEBUG] 2025-12-19T04:42:03.756Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:42:03.761Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 122ms
[DEBUG] 2025-12-19T04:43:04.451Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:43:05.106Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 1181ms
[DEBUG] 2025-12-19T04:44:03.804Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:44:03.811Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 171ms
[DEBUG] 2025-12-19T04:45:03.760Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:45:03.766Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 129ms
[DEBUG] 2025-12-19T04:46:03.879Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:46:03.885Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 253ms
[DEBUG] 2025-12-19T04:47:03.870Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:47:03.885Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 240ms
[DEBUG] 2025-12-19T04:48:04.061Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:48:04.073Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 427ms
[DEBUG] 2025-12-19T04:49:03.923Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:49:04.237Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 591ms
[DEBUG] 2025-12-19T04:50:03.778Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:50:03.784Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 152ms
[DEBUG] 2025-12-19T04:50:45.722Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:50:45.748Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 896ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 7.9s (1318 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:50:56.136Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:50:56.152Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 8457ms
[DEBUG] 2025-12-19T04:50:56.184Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:50:56.185Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:50:56.185Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 11263ms
[DEBUG] 2025-12-19T04:50:56.564Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:34:04.009Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:50:56.571Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A34%3A04.009Z 500 in 352ms
[DEBUG] 2025-12-19T04:50:56.600Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:50:56.600Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:50:56.600Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 300ms
 â—‹ Compiling /_not-found ...
 âœ“ Compiled /_not-found in 3s (1319 modules)
 GET /images/products/box-premium.jpg 404 in 6462ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-premium.jpg received null
 GET /images/products/guarda-corpo.jpg 404 in 6508ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo.jpg received null
 GET /images/products/box-incolor.jpg 404 in 6569ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-incolor.jpg received null
 GET /images/products/espelho-led.jpg 404 in 6623ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-led.jpg received null
 GET /images/products/espelho-bisotado.jpg 404 in 6628ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-bisotado.jpg received null
 GET /images/products/porta-correr.jpg 404 in 455ms
 â¨¯ The requested resource isn't a valid image for /images/products/porta-correr.jpg received null
 GET /images/products/fachada.jpg 404 in 543ms
 â¨¯ The requested resource isn't a valid image for /images/products/fachada.jpg received null
 GET /images/products/tampo.jpg 404 in 592ms
 â¨¯ The requested resource isn't a valid image for /images/products/tampo.jpg received null
 GET /images/products/divisoria.jpg 404 in 680ms
 â¨¯ The requested resource isn't a valid image for /images/products/divisoria.jpg received null
 GET /images/products/box-canto.jpg 404 in 721ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-canto.jpg received null
 GET /images/products/guarda-corpo-inox.jpg 404 in 166ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo-inox.jpg received null
 GET /produtos 200 in 8337ms
 GET /images/products/box-premium.jpg 404 in 599ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-premium.jpg received null
 GET /images/products/box-incolor.jpg 404 in 634ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-incolor.jpg received null
 GET /images/products/guarda-corpo.jpg 404 in 671ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo.jpg received null
 GET /images/products/espelho-led.jpg 404 in 724ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-led.jpg received null
 GET /images/products/espelho-bisotado.jpg 404 in 518ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-bisotado.jpg received null
 GET /images/products/divisoria.jpg 404 in 548ms
 â¨¯ The requested resource isn't a valid image for /images/products/divisoria.jpg received null
 GET /images/products/porta-correr.jpg 404 in 588ms
 â¨¯ The requested resource isn't a valid image for /images/products/porta-correr.jpg received null
 GET /images/products/fachada.jpg 404 in 627ms
 â¨¯ The requested resource isn't a valid image for /images/products/fachada.jpg received null
 â—‹ Compiling /icon.png ...
 âœ“ Compiled /icon.png in 3s (1348 modules)
 âœ“ Compiled in 1ms (1348 modules)
 GET /images/products/tampo.jpg 404 in 8190ms
 â¨¯ The requested resource isn't a valid image for /images/products/tampo.jpg received null
 âœ“ Compiled in 1ms (1348 modules)
 âœ“ Compiled in 1ms (1348 modules)
[DEBUG] 2025-12-19T04:51:23.408Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
 GET /icon.png?4a0e2032a7eb3a55 200 in 13527ms
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:51:23.526Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 7515ms
 âœ“ Compiled /manifest.webmanifest in 1ms (1348 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:51:25.332Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:51:25.333Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:51:25.333Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
[DEBUG] 2025-12-19T04:51:25.334Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:51:25.335Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:51:25.335Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 11930ms
 GET /api/auth/session 200 in 11938ms
 âœ“ Compiled in 2ms (1353 modules)
 GET /images/products/box-canto.jpg 404 in 9901ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-canto.jpg received null
 GET /images/products/guarda-corpo-inox.jpg 404 in 9931ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo-inox.jpg received null
 âœ“ Compiled in 1ms (1353 modules)
 âœ“ Compiled in 5ms (1353 modules)
 GET /images/products/janela.jpg 404 in 8491ms
 â¨¯ The requested resource isn't a valid image for /images/products/janela.jpg received null
 âœ“ Compiled in 0ms (1353 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /manifest.webmanifest 200 in 10048ms
 GET /icon.png?4a0e2032a7eb3a55 200 in 8049ms
[DEBUG] 2025-12-19T04:51:33.801Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:51:33.802Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:51:33.802Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 7715ms
 âœ“ Compiled in 1ms (1353 modules)
[DEBUG] 2025-12-19T04:51:36.810Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:51:36.894Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 8377ms
 âœ“ Compiled in 1ms (1353 modules)
 âœ“ Compiled in 0ms (1353 modules)
 âœ“ Compiled in 1ms (1353 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:51:43.356Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:51:43.357Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:51:43.357Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 9204ms
[DEBUG] 2025-12-19T04:51:44.978Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:51:45.052Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 8126ms
[DEBUG] 2025-12-19T04:51:45.749Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:51:45.754Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 157ms
[DEBUG] 2025-12-19T04:51:55.666Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:51:55.669Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 78ms
[DEBUG] 2025-12-19T04:52:05.740Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:52:05.747Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 137ms
[DEBUG] 2025-12-19T04:52:15.679Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:52:15.683Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 81ms
[DEBUG] 2025-12-19T04:52:25.695Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:52:25.700Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 108ms
[DEBUG] 2025-12-19T04:52:35.688Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:52:35.693Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 94ms
[DEBUG] 2025-12-19T04:52:45.699Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:52:45.705Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 109ms
[DEBUG] 2025-12-19T04:52:55.751Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:52:55.756Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 167ms
[DEBUG] 2025-12-19T04:53:05.658Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:05.661Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 64ms
 â—‹ Compiling /api/ai/chat ...
 âœ“ Compiled /api/ai/chat/export-quote in 5.2s (1506 modules)
 âœ“ Compiled (1510 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:53:15.453Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:53:15.454Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:53:15.454Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
[DEBUG] 2025-12-19T04:53:15.455Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:53:15.456Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:53:15.456Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 3890ms
prisma:query SELECT "public"."products"."id", "public"."products"."category"::text, "public"."products"."name", "public"."products"."subcategory", "public"."products"."priceType"::text, "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax" FROM "public"."products" WHERE "public"."products"."isActive" = $1 ORDER BY "public"."products"."category" ASC, "public"."products"."name" ASC OFFSET $2
[DEBUG] 2025-12-19T04:53:15.603Z - [AI CHAT] Product catalog cached 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:53:15.663Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766119875450-t9p9b0ab9'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766119875450-t9p9b0ab9"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:15.687Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766119875450-t9p9b0ab9"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
 â—‹ Compiling /api/ai/products/suggestions ...
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
 âœ“ Compiled /api/ai/products/suggestions in 1797ms (1512 modules)
[INFO] 2025-12-19T04:53:17.938Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:53:18.017Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 1428,
  tokensUsed: 4794,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 9186ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:18.032Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:53:19.063Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."description", "public"."products"."shortDescription", "public"."products"."category"::text, "public"."products"."images", "public"."products"."thumbnail", "public"."products"."priceType"::text, "public"."products"."basePrice", "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes", "public"."products"."thicknesses", "public"."products"."isFeatured" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."isFeatured" DESC, "public"."products"."createdAt" DESC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:53:19.066Z - Product suggestions fetched { category: 'PORTAS', count: 3, limit: 3 }
 GET /api/ai/products/suggestions?category=PORTAS&limit=3 200 in 3580ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:19.075Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 3463ms
 â—‹ Compiling /_not-found ...
 âœ“ Compiled /_not-found in 2.7s (1513 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /products/porta-pivotante-thumb.jpg 404 in 5123ms
 GET /products/porta-pivotante-premium-thumb.jpg 404 in 5132ms
[DEBUG] 2025-12-19T04:53:24.303Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:53:24.304Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:53:24.304Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 2786ms
[DEBUG] 2025-12-19T04:53:25.189Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:53:25.190Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:53:25.190Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."products"."id", "public"."products"."category"::text, "public"."products"."name", "public"."products"."subcategory", "public"."products"."priceType"::text, "public"."products"."pricePerM2", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax" FROM "public"."products" WHERE "public"."products"."isActive" = $1 ORDER BY "public"."products"."category" ASC, "public"."products"."name" ASC OFFSET $2
[DEBUG] 2025-12-19T04:53:25.211Z - [AI CHAT] Product catalog cached 
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."slug", "public"."products"."category"::text, "public"."products"."description", "public"."products"."shortDescription", "public"."products"."basePrice", "public"."products"."priceRangeMin", "public"."products"."priceRangeMax", "public"."products"."colors", "public"."products"."finishes" FROM "public"."products" WHERE ("public"."products"."category" = CAST($1::text AS "public"."ProductCategory") AND "public"."products"."isActive" = $2) ORDER BY "public"."products"."basePrice" ASC LIMIT $3 OFFSET $4
[INFO] 2025-12-19T04:53:25.236Z - Smart product suggestions added to context {
  category: 'PORTAS',
  productCount: 5,
  userMessage: 'Selecionei o produto: Porta Pivotante Premium'
}
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:53:25.252Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766119875450-t9p9b0ab9'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766119875450-t9p9b0ab9"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:25.259Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766119875450-t9p9b0ab9"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[DEBUG] 2025-12-19T04:53:25.740Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:25.744Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 159ms
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[INFO] 2025-12-19T04:53:26.696Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:53:26.705Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 918,
  tokensUsed: 5307,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 2126ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:26.720Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:53:26.806Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:53:26.806Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:53:26.806Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 187ms
[DEBUG] 2025-12-19T04:53:28.860Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:53:28.860Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:53:28.860Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 108ms
[DEBUG] 2025-12-19T04:53:35.655Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:35.658Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 72ms
[DEBUG] 2025-12-19T04:53:45.658Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:45.660Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 69ms
[DEBUG] 2025-12-19T04:53:55.656Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:query SELECT 1
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:53:55.660Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 70ms
[DEBUG] 2025-12-19T04:54:05.777Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:54:05.784Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 183ms
[DEBUG] 2025-12-19T04:54:15.110Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:54:15.110Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:54:15.110Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
[DEBUG] 2025-12-19T04:54:15.114Z - [AI CHAT] Using cached product catalog 
prisma:query SELECT 1
prisma:query SELECT "public"."quotes"."id", "public"."quotes"."number", "public"."quotes"."customerName", "public"."quotes"."total", "public"."quotes"."status"::text, "public"."quotes"."createdAt" FROM "public"."quotes" WHERE "public"."quotes"."userId" = $1 ORDER BY "public"."quotes"."createdAt" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."quote_items"."id", "public"."quote_items"."quoteId", "public"."quote_items"."productId", "public"."quote_items"."description", "public"."quote_items"."specifications", "public"."quote_items"."width", "public"."quote_items"."height", "public"."quote_items"."quantity", "public"."quote_items"."color", "public"."quote_items"."finish", "public"."quote_items"."thickness", "public"."quote_items"."glassType", "public"."quote_items"."glassColor", "public"."quote_items"."model", "public"."quote_items"."unitPrice", "public"."quote_items"."totalPrice", "public"."quote_items"."customerImages" FROM "public"."quote_items" WHERE "public"."quote_items"."quoteId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt" FROM "public"."ai_conversations" WHERE ("public"."ai_conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt" FROM "public"."ai_messages" WHERE "public"."ai_messages"."conversationId" IN ($1) ORDER BY "public"."ai_messages"."createdAt" DESC LIMIT $2 OFFSET $3
[DEBUG] 2025-12-19T04:54:15.125Z - [UNIFIED CONTEXT] Fetching for: {
  userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac',
  phoneNumber: undefined,
  sessionId: 'session-1766119875450-t9p9b0ab9'
}
prisma:error 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766119875450-t9p9b0ab9"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
[ERROR] 2025-12-19T04:54:15.128Z - [UNIFIED CONTEXT] Error fetching: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findMany()` invocation:

{
  where: {
    OR: [
      {
        userId: "18ce88ad-3ba2-42a6-9a06-fd4976d5feac"
      },
      {
        sessionId: "session-1766119875450-t9p9b0ab9"
      }
    ]
  },
  include: {
    messages: {
      select: {
        id: true
      }
    },
    user: {
      select: {
        name: true,
        phone: true
      }
    }
  },
  orderBy: {
    createdAt: "desc"
  }
}

Unknown argument `userId`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getUnifiedCustomerContext (webpack-internal:///(rsc)/./src/services/unified-context.ts:23:34)
    at async POST (webpack-internal:///(rsc)/./src/app/api/ai/chat/route.ts:545:32)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","imageUrl","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[DEBUG] 2025-12-19T04:54:15.700Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:54:15.704Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 114ms
prisma:query INSERT INTO "public"."ai_messages" ("id","conversationId","role","content","metadata","createdAt") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."ai_messages"."id", "public"."ai_messages"."conversationId", "public"."ai_messages"."role", "public"."ai_messages"."content", "public"."ai_messages"."metadata", "public"."ai_messages"."imageUrl", "public"."ai_messages"."createdAt"
[INFO] 2025-12-19T04:54:16.903Z - Quote data extracted from conversation {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  itemCount: 1,
  hasCustomerData: true
}
prisma:query UPDATE "public"."ai_conversations" SET "updatedAt" = $1, "quoteContext" = $2 WHERE ("public"."ai_conversations"."id" = $3 AND 1=1) RETURNING "public"."ai_conversations"."id", "public"."ai_conversations"."sessionId", "public"."ai_conversations"."customerName", "public"."ai_conversations"."customerEmail", "public"."ai_conversations"."customerPhone", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."quoteId", "public"."ai_conversations"."status", "public"."ai_conversations"."createdAt", "public"."ai_conversations"."updatedAt", "public"."ai_conversations"."lastMessageAt"
[DEBUG] 2025-12-19T04:54:16.913Z - AI Chat response generated {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  responseTimeMs: 1239,
  tokensUsed: 5053,
  model: 'llama-3.3-70b-versatile',
  hasImage: false
}
 POST /api/ai/chat 200 in 1931ms
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:54:16.920Z - [CONTEXT SYNC] Error getting linked conversations: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   updatedAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async getLinkedConversations (webpack-internal:///(rsc)/./src/services/context-sync.ts:190:29)
    at async autoSyncAfterWebMessage (webpack-internal:///(rsc)/./src/services/context-sync.ts:231:20) {
  clientVersion: '6.19.0'
}
[DEBUG] 2025-12-19T04:54:19.057Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:54:19.057Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:54:19.057Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
prisma:query SELECT "public"."ai_conversations"."id", "public"."ai_conversations"."quoteContext", "public"."ai_conversations"."status" FROM "public"."ai_conversations" WHERE "public"."ai_conversations"."id" = $1 ORDER BY "public"."ai_conversations"."createdAt" DESC LIMIT $2 OFFSET $3
 GET /api/ai/chat/export-quote?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3 200 in 119ms
[DEBUG] 2025-12-19T04:54:25.675Z - [CHECK UPDATES] Checking for: {
  conversationId: 'da8224ee-3ccd-4bad-be60-0f3116c3fae3',
  lastChecked: '2025-12-19T04:51:15.451Z'
}
prisma:error 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
[ERROR] 2025-12-19T04:54:25.679Z - [CHECK UPDATES] Error: PrismaClientValidationError: 
Invalid `prisma.aiConversation.findUnique()` invocation:

{
  where: {
    id: "da8224ee-3ccd-4bad-be60-0f3116c3fae3"
  },
  select: {
    whatsappConversationId: true,
    ~~~~~~~~~~~~~~~~~~~~~~
    updatedAt: true,
?   id?: true,
?   sessionId?: true,
?   customerName?: true,
?   customerEmail?: true,
?   customerPhone?: true,
?   quoteContext?: true,
?   quoteId?: true,
?   status?: true,
?   createdAt?: true,
?   lastMessageAt?: true,
?   quote?: true,
?   messages?: true,
?   _count?: true
  }
}

Unknown field `whatsappConversationId` for select statement on model `AiConversation`. Available options are marked with ?.
    at Nn (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:29:1363)
    at ei.handleRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6911)
    at ei.handleAndLogRequestError (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6593)
    at ei.request (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:121:6300)
    at async a (D:\VERSATI GLASS\node_modules\.pnpm\@prisma+client@6.19.0_prism_0ade0c2032e7f19289902b884120cfab\node_modules\@prisma\client\runtime\library.js:130:9551)
    at async GET (webpack-internal:///(rsc)/./src/app/api/ai/chat/check-updates/route.ts:36:25)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:57228
    at async eT.execute (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:46851)
    at async eT.handle (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:6:58760)
    at async doRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1496:28)
    at async DevServer.renderPageComponent (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:1962:32)
    at async DevServer.pipeImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\next-server.js:272:17)
    at async DevServer.handleRequestImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\base-server.js:818:17)
    at async D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:339:20
    at async Span.traceAsyncFn (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\trace\trace.js:154:20)
    at async DevServer.handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\dev\next-dev-server.js:336:24)
    at async invokeRender (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:179:21)
    at async handleRequest (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:359:24)
    at async requestHandlerImpl (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\router-server.js:383:13)
    at async Server.requestListener (D:\VERSATI GLASS\node_modules\.pnpm\next@14.2.33_@babel+core@7._7ed58a22f15b2f2041835ab71b63c437\node_modules\next\dist\server\lib\start-server.js:141:13) {
  clientVersion: '6.19.0'
}
 GET /api/ai/chat/check-updates?conversationId=da8224ee-3ccd-4bad-be60-0f3116c3fae3&lastChecked=2025-12-19T04%3A51%3A15.451Z 500 in 90ms
 GET /produtos 200 in 1889ms
 GET /images/products/espelho-led.jpg 404 in 737ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-led.jpg received null
 GET /images/products/espelho-bisotado.jpg 404 in 794ms
 â¨¯ The requested resource isn't a valid image for /images/products/espelho-bisotado.jpg received null
 GET /images/products/janela.jpg 404 in 976ms
 â¨¯ The requested resource isn't a valid image for /images/products/janela.jpg received null
 GET /images/products/guarda-corpo-inox.jpg 404 in 839ms
 â¨¯ The requested resource isn't a valid image for /images/products/guarda-corpo-inox.jpg received null
 GET /images/products/box-canto.jpg 404 in 901ms
 â¨¯ The requested resource isn't a valid image for /images/products/box-canto.jpg received null
 GET /images/products/tampo.jpg 404 in 729ms
 â¨¯ The requested resource isn't a valid image for /images/products/tampo.jpg received null
 GET /images/products/porta-correr.jpg 404 in 1127ms
 â¨¯ The requested resource isn't a valid image for /images/products/porta-correr.jpg received null
 â—‹ Compiling /icon.png ...
 âœ“ Compiled /icon.png in 10.4s (1540 modules)
 âœ“ Compiled /api/auth/[...nextauth] in 3ms (1540 modules)
 GET /images/products/fachada.jpg 404 in 17699ms
 â¨¯ The requested resource isn't a valid image for /images/products/fachada.jpg received null
 GET /images/products/divisoria.jpg 404 in 17793ms
 â¨¯ The requested resource isn't a valid image for /images/products/divisoria.jpg received null
 âœ“ Compiled in 2ms (1542 modules)
 GET /icon.png?4a0e2032a7eb3a55 200 in 28907ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
[DEBUG] 2025-12-19T04:55:04.086Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:55:04.088Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:55:04.088Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 20060ms
 â—‹ Compiling /manifest.webmanifest ...
 âœ“ Compiled /manifest.webmanifest in 4.9s (1547 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev
 GET /icon.png?4a0e2032a7eb3a55 200 in 9142ms
[DEBUG] 2025-12-19T04:55:12.666Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:55:12.667Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:55:12.667Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 9353ms
 GET /manifest.webmanifest 200 in 9721ms
[DEBUG] 2025-12-19T04:55:13.208Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:55:13.209Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:55:13.210Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 8484ms
[DEBUG] 2025-12-19T04:55:14.127Z - [AUTH] JWT callback { hasUser: false, trigger: undefined }
[DEBUG] 2025-12-19T04:55:14.127Z - [AUTH] Session callback { hasToken: true }
[DEBUG] 2025-12-19T04:55:14.128Z - [AUTH] Session created { userId: '18ce88ad-3ba2-42a6-9a06-fd4976d5feac', role: 'CUSTOMER' }
 GET /api/auth/session 200 in 669ms
 âœ“ Compiled in 10.7s (2555 modules)
